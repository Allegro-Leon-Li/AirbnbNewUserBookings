<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>jQuery Ajax Demo</title>

<style type="text/css"> 
input, button, select {
    margin-bottom: 10px;
}
</style>
</head>
<body>

<h1>Title</h1>
<label for="keyword">keyword</label>
<input type="text" id="keyword">

<button id="search">search</button>
<p id="searchResult"></p>

<h1>new</h1>
<label for="style">style</label>
<input type="text" id="style"><br>

<label for="code">code</label>
<input type="text" id="code"><br>

<label for="title">title</label>
<select id="title">
    <option value="a">a</option>
    <option value="b">b</option>
</select><br>

<button id="save">save</button>
<p id="createResult"></p>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script type="text/JavaScript">
$(document).ready(function() {
    $("#search").click(function() {
        $.ajax({
            type: "GET",
            url: "127.0.0.1:8000/" + $("#keyword").val(),
            dataType: "json",
            success: function(data) {
                if (data.number) {
                    $("#searchResult").html(
                        '[找到員工] 員工編號：' +data.number + ', 姓名：' + data.name + ', 性別：' + data.sex
                    );
                } else {
                    $("#searchResult").html(data.msg);
                }
            },
            error: function(jqXHR) {
                alert("發生錯誤: " + jqXHR.status);
            }
        })
    })

    $("#save").click(function() {
        $.ajax({
            type: "POST",
            url: "127.0.0.1:8000/snippets",
            dataType: "json",
            data: {
                code: $("#code").val()         
            },
            success: function(data) {
                if (data.code) {
                    $("#createResult").html('people: ' + data.code + 'success');
                } else {
                    $("#createResult").html(data.msg);
                }                   
            },
            error: function(jqXHR) {
                alert("error" + jqXHR.status);
            }
        })
    })
});
</script>

</body>
</html>